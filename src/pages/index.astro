---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
---

<Layout title="CabageCraft ü•¨">
  <main class="min-h-screen">
    <!-- Hero Section -->
    <header class="bg-gradient-to-b from-emerald-900 to-black py-20 text-center">
      <div class="container mx-auto px-6">
        <h1 class="text-5xl md:text-7xl text-emerald-400 mb-8 font-press">CabageCraft ü•¨</h1>
        <p class="text-2xl md:text-3xl text-gray-300 mb-4">Survival ‚Ä¢ Chill Vibes ‚Ä¢ Open to Friends</p>
        <p class="text-xl text-emerald-300 mb-12">Get IP in Discord ‚Ä¢ Request access below!</p>
        
        <div class="inline-flex items-center bg-gray-900 rounded-lg p-6 shadow-2xl">
          <code id="server-ip" class="text-2xl text-emerald-300 mr-6">play.nieuserver.online</code>
          <button id="copy-btn" class="bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded text-white font-bold transition">
            Copy IP
          </button>
        </div>
        <p id="copy-feedback" class="mt-4 text-green-400 hidden">‚úì IP copied!</p>
        
        <div class="mt-12 text-xl">
          <span class="text-gray-400">Status:</span>
          <span id="status" class="ml-2 font-bold">Loading...</span>
          <span id="players" class="ml-4"></span>
        </div>
      </div>
    </header>

    <!-- Quick Rules -->
    <section class="py-16 bg-gray-900">
      <div class="container mx-auto px-6">
        <h2 class="text-4xl text-emerald-400 text-center mb-12 font-press">Quick Rules</h2>
        <ul class="max-w-3xl mx-auto space-y-6 text-lg">
          <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> Keep things friendly & respectful</li>
          <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> No cheating or X-ray</li>
          <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> PVP allowed but only for fun (ask first!)</li>
          <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> No griefing or stealing</li>
        </ul>
      </div>
    </section>

    <!-- Gallery -->
    <section class="py-16">
      <div class="container mx-auto px-6">
        <h2 class="text-4xl text-emerald-400 text-center mb-12 font-press">Gallery ü•¨</h2>
        <p class="text-center text-gray-400 mb-8">Share your screenshots ‚Äî we'll add them!</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
          <img src="https://i.redd.it/9g86265t97cb1.png" alt="Cabbage farm" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
          <img src="https://i.ytimg.com/vi/kq_Gex8awSo/maxresdefault.jpg" alt="Tomato & cabbage farm" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
          <img src="https://preview.redd.it/do-you-like-my-cabbage-farm-v0-xjx5203vkcf81.jpg?auto=webp&s=7d73b4a73ff7e2410b948b113f82197af2b463a8" alt="Funny cabbage farm" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
          <img src="https://static0.thegamerimages.com/wordpress/wp-content/uploads/2023/07/minecraft-aesthetic-farm-feature-image.jpg" alt="Aesthetic veggie farm" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
          <img src="https://static0.srcdn.com/wordpress/wp-content/uploads/2022/01/Minecraft-Lettuce.jpg" alt="Lettuce creeper heads" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
          <img src="https://preview.redd.it/you-can-use-creeper-heads-to-make-lettuce-v0-roxygi3hvp981.jpg?width=640&crop=smart&auto=webp&s=0742aeaf4b374888f5fb7b7becffd9c9bb0349eb" alt="Creeper lettuce trick" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        </div>
      </div>
    </section>

    <!-- Request Access Form -->
    <section class="py-16 bg-gray-900">
      <div class="container mx-auto px-6 max-w-2xl">
        <h2 class="text-4xl text-emerald-400 text-center mb-12 font-press">Request Access</h2>
        <p class="text-center mb-8">DM IP on Discord or submit below!</p>
        
        <form action="https://formspree.io/f/xqezkpdz" method="POST" class="space-y-6">
          <!-- Same fields as before -->
          <div>
            <label class="block text-lg mb-2" for="username">Minecraft Username</label>
            <input type="text" id="username" name="username" required class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white" placeholder="Steve">
          </div>
          <div>
            <label class="block text-lg mb-2" for="message">Why join? Or share a screenshot link!</label>
            <textarea id="message" name="message" rows="4" class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white"></textarea>
          </div>
          <div>
            <label class="block text-lg mb-2" for="email">Email (for replies)</label>
            <input type="email" id="email" name="_replyto" required class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white" placeholder="you@example.com">
          </div>
          <div class="text-center">
            <button type="submit" class="bg-emerald-600 hover:bg-emerald-500 px-8 py-4 rounded text-white text-xl font-bold transition">Send Request</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-12 text-center">
      <p class="text-2xl mb-6">Join Discord for IP & Updates!</p>
      <a href="https://discord.gg/MMEmBvX6Mh" target="_blank" rel="noopener noreferrer" class="inline-block bg-indigo-600 hover:bg-indigo-500 px-8 py-4 rounded text-white text-xl font-bold transition">
        Join Discord
      </a>
      <p class="mt-8 text-gray-500">Made with ‚ù§Ô∏è for the crew</p>
    </footer>
  </main>

  <script is:inline>
    // Copy IP
    document.getElementById('copy-btn').addEventListener('click', () => {
      const ip = document.getElementById('server-ip').textContent;
      navigator.clipboard.writeText(ip);
      const feedback = document.getElementById('copy-feedback');
      feedback.classList.remove('hidden');
      setTimeout(() => feedback.classList.add('hidden'), 2000);
    });

    // Live status
    async function fetchStatus() {
      try {
        const response = await fetch('https://api.mcsrvstat.us/2/play.nieuserver.online:25565');
        const data = await response.json();
        const statusEl = document.getElementById('status');
        const playersEl = document.getElementById('players');
        if (data.online) {
          statusEl.textContent = 'üü¢ Online';
          statusEl.className = 'ml-2 font-bold text-green-400';
          playersEl.textContent = `${data.players?.online || 0}/${data.players?.max || 20} players`;
        } else {
          statusEl.textContent = 'üî¥ Offline';
          statusEl.className = 'ml-2 font-bold text-red-400';
          playersEl.textContent = '';
        }
      } catch (err) {
        document.getElementById('status').textContent = '‚ö†Ô∏è Unavailable';
      }
    }
    fetchStatus();
    setInterval(fetchStatus, 30000);
  </script>
</Layout>