---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CabageCraft</title>
  <meta name="description" content="Join our chill Minecraft survival server with friends! Fun PVP ‚Ä¢ No griefing">
  
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Pixel font -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(to bottom, #1a1a1a, #0d1b0d);
      color: #e0e0e0;
    }
    h1, h2, h3 {
      font-family: 'Press Start 2P', cursive;
      text-shadow: 2px 2px 4px #000;
    }
    .pixel-text {
      font-family: 'Press Start 2P', cursive;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Hero Section -->
  <header class="bg-gradient-to-b from-emerald-900 to-black py-20 text-center">
    <div class="container mx-auto px-6">
      <h1 class="text-5xl md:text-7xl text-emerald-400 mb-8">CabageCrafth</h1>
      <p class="text-2xl md:text-3xl text-gray-300 mb-4">Survival ‚Ä¢ Chill Vibes ‚Ä¢ Open to Friends</p>
      <p class="text-xl text-emerald-300 mb-12">Get IP in Discord ‚Ä¢ Request access below!</p>
      
      <!-- Server IP + Copy Button -->
      <div class="inline-flex items-center bg-gray-900 rounded-lg p-6 shadow-2xl">
        <code id="server-ip" class="text-2xl text-emerald-300 mr-6">play.nieuserver.online</code>
        <button onclick="copyIP()" class="bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded text-white font-bold transition">
          Copy IP
        </button>
      </div>
      <p id="copy-feedback" class="mt-4 text-green-400 hidden">‚úì IP copied! Share in DMs</p>
      
      <!-- Live Status -->
      <div class="mt-12 text-xl">
        <span class="text-gray-400">Status:</span>
        <span id="status" class="ml-2 font-bold">Loading...</span>
        <span id="players" class="ml-4"></span>
      </div>
    </div>
  </header>

  <!-- Quick Rules -->
  <section class="py-16 bg-gray-900">
    <div class="container mx-auto px-6">
      <h2 class="text-4xl text-emerald-400 text-center mb-12 pixel-text">Quick Rules</h2>
      <ul class="max-w-3xl mx-auto space-y-6 text-lg">
        <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> Keep things friendly & respectful</li>
        <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> No cheating or X-ray</li>
        <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> PVP allowed but only for fun (ask first!)</li>
        <li class="flex items-start"><span class="text-emerald-400 mr-4">¬ª</span> No griefing or stealing</li>
      </ul>
    </div>
  </section>

  <!-- Gallery (placeholders) -->
  <section class="py-16">
    <div class="container mx-auto px-6">
      <h2 class="text-4xl text-emerald-400 text-center mb-12 pixel-text">Gallery</h2>
      <p class="text-center text-gray-400 mb-8">Share your screenshots ‚Äî we'll add them!</p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        <img src="https://i.imgur.com/8NlT8.jpg" alt="Epic survival build" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        <img src="https://i.redd.it/showing-off-my-biggest-ever-survival-build-v0-t2zlbmwngcmc1.png?width=1920&format=png&auto=webp&s=cdfe1938f3bdf114d30cd0ada0ff456fe5bc98da" alt="Massive survival project" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        <img src="https://i.imgur.com/ggziY9u.jpg" alt="Windkeep Castle" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        <img src="https://static0.srcdn.com/wordpress/wp-content/uploads/2021/05/Minecraft-Church-Screenshot.jpg?w=1600&h=900&fit=crop" alt="Beautiful church build" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        <img src="https://i.redd.it/fohd27plryoa1.png" alt="Stunning landscape" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
        <img src="https://wallpapers.com/images/hd/minecraft-map-1920-x-1200-wallpaper-foew6rxeiljyk6j9.jpg" alt="Scenic Minecraft world" class="rounded-lg shadow-2xl hover:scale-105 transition w-full h-64 object-cover">
      </div>
    </div>
  </section>

  <!-- Request Access Form -->
  <section class="py-16 bg-gray-900">
    <div class="container mx-auto px-6 max-w-2xl">
      <h2 class="text-4xl text-emerald-400 text-center mb-12 pixel-text">Request Access</h2>
      <p class="text-center mb-8">DM IP on Discord or submit below (for whitelist/screenshots/etc.)</p>
      
      <!-- Formspree: Sign up free at formspree.io & paste your endpoint -->
      <form action="https://formspree.io/f/xqezkpdz" method="POST" class="space-y-6">
        <div>
          <label class="block text-lg mb-2" for="username">Minecraft Username</label>
          <input type="text" id="username" name="username" required class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white" placeholder="Steve">
        </div>
        <div>
          <label class="block text-lg mb-2" for="message">Why join? Or share a screenshot link! (optional)</label>
          <textarea id="message" name="message" rows="4" class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white" placeholder="Friends with [name] / Got epic builds to share!"></textarea>
        </div>
        <div>
          <label class="block text-lg mb-2" for="email">Email (for replies)</label>
          <input type="email" id="email" name="_replyto" required class="w-full px-4 py-3 bg-gray-800 rounded border border-gray-700 focus:border-emerald-500 outline-none text-white" placeholder="you@example.com">
        </div>
        <div class="text-center">
          <button type="submit" class="bg-emerald-600 hover:bg-emerald-500 px-8 py-4 rounded text-white text-xl font-bold transition">
            Send Request
          </button>
        </div>
      </form>
      <p class="text-center mt-6 text-sm text-gray-500">We'll add you quick! Powered by Formspree</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-black py-12 text-center">
    <p class="text-2xl mb-6">Join Discord for IP & Updates!</p>
    <a href="https://discord.gg/MMEmBvX6Mh" target="_blank" rel="noopener noreferrer" class="inline-block bg-indigo-600 hover:bg-indigo-500 px-8 py-4 rounded text-white text-xl font-bold transition">
      Join Discord
    </a>
    <p class="mt-8 text-gray-500">Made with ‚ù§Ô∏è for the crew</p>
  </footer>

  <!-- Scripts -->
  <script>
    function copyIP() {
      const ip = document.getElementById('server-ip').textContent;
      navigator.clipboard.writeText(ip);
      const feedback = document.getElementById('copy-feedback');
      feedback.classList.remove('hidden');
      setTimeout(() => feedback.classList.add('hidden'), 2000);
    }

    async function fetchStatus() {
      const ip = 'play.nieuserver.online'; // ‚Üê YOUR REAL IP/DOMAIN HERE (no port)
      const port = 25565;
      try {
        const response = await fetch(`https://api.mcsrvstat.us/2/${ip}:${port}`);
        const data = await response.json();
        
        const statusEl = document.getElementById('status');
        const playersEl = document.getElementById('players');
        
        if (data.online) {
          statusEl.textContent = 'üü¢ Online';
          statusEl.className = 'text-green-400';
          playersEl.textContent = `${data.players?.online || 0}/${data.players?.max || 20} players`;
        } else {
          statusEl.textContent = 'üî¥ Offline';
          statusEl.className = 'text-red-400';
          playersEl.textContent = '';
        }
      } catch (err) {
        document.getElementById('status').textContent = '‚ö†Ô∏è Status unavailable';
      }
    }

    fetchStatus();
    setInterval(fetchStatus, 30000); // Refresh every 30s
  </script>
</body>
</html>